<p id="notice"><%= notice %></p>

<p>
  <h1><%= @event.name %></h1>
  <h2>Managed by: <%= @event.owner.full_name %></h2>
  <h2>Date:
  <% if @event.start_date %>
     <%= Time.at(@event.start_date).strftime('%a, %d %b') %></br>
  <% else %>
    Pending...
  <% end %></h2>
</p>
<p>
  <strong>Participants:</strong></br>
  <% if @participant_ids.size == 0 %>
    Looks like no one is participating yet...
  <% else %>
    <% @participants.each do |p| %>
      -<%= p.full_name %><br>
    <% end %>
  <% end %>
</p>

<p>
  <strong>Available Activities:</strong></br> # Need to add athlete name to each activity in parens or something.
  <% if @activities.size == 0 %>
    No activities are included currently.
  <% else %>
    <% @activities.each do |activity| %><br>
      <%= activity.name %>
    <% end %>
  <% end %>
</p>

<p>
  <strong>Available Segments:</strong></br>
  <% if @segments.size == 0 %>
    No activities are included currently.
  <% else %>
    <% @segments.each do |segment| %>
      <%= link_to segment.name, segment %></br>
      
    <% end %>
  <% end %>
</p>
  
<p>
  Tracks:</br>
  <strong>This is going to be where the meat of the page is.</strong>
  <% @tracks.each do |track| %>
    <%= track.name %></br>
    <% track.efforts.each do |effort| %>
      -----------------</br>
      <%= Segment.find_by(strava_id: effort.segment_id).name %>:
      <%= Time.at(effort.start_date + effort.elapsed_time).strftime('%H:%M:%S') %></br>
    <% end %>
  
  <% end %>
</p>

<%= link_to 'Edit', edit_event_path(@event) %>
<%= link_to 'Back', events_path %>